<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title id="titleaba">Conecta Inovação - Centros de Inovação</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<header>
    <div class="logo">
        <img src="../public/bandeira.png" alt="Bandeira de Santa Catarina" class="bandeira">
        <h1>Conecta Inovação</h1>
    </div>
    <a href="../index.html" class="home-button">
        <img src="../public/home.png" alt="Home" class="home-icon">
    </a>
</header>
<div class="content">
    <h2 id="titulop">Centros de Inovação</h2>
    <div class="cards">

        <script type="text/javascript">

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const tipoAgente = urlParams.get("tipo_agente");

            // Se for Centro de Inovação
            if (tipoAgente === "CentrosInovacao"){

                axios.get("http://localhost:8080/CentrosInovacao/carregar")
                    .then((response) => {
                        if(response.status === 200){
                            const cadastros = response.data;

                            for (const agente of cadastros){
                                const card = `
                                <div class="card">
                                <h3>${agente.nome}</h3>
                                <p><strong>Descrição:</strong> ${agente.descricao}</p>
                                <p><strong>Estado:</strong> ${agente.estado}</p>
                                <p><strong>Cidade:</strong> ${agente.cidade}</p>
                                <a href="../CentrosPublic/CentrosInfo/indexCentro.html?id_agente=${agente.id}" class="ver-mais">Ver mais</a>
                                </div>`;
                                $('.cards').append(card);
                            }

                        }
                    })
                    .catch((err) => {
                        alert(`Deu errado: ${err.message}`);
                    });

                $('#titulop').text("Centros de Inovação")
                $('#titleaba').text("Conecta Inovação - Centros de Inovação")

            } else if (tipoAgente === "Coworkings"){

                axios.get("http://localhost:8080/Coworkings/carregar")
                    .then((response) => {
                        if(response.status === 200){
                            const cadastros = response.data;

                            for (const agente of cadastros){
                                const card = `
                                <div class="card">
                                <h3>${agente.nome}</h3>
                                <p><strong>Descrição:</strong> ${agente.descricao}</p>
                                <p><strong>Estado:</strong> ${agente.estado}</p>
                                <p><strong>Cidade:</strong> ${agente.cidade}</p>
                                <a href="../CentrosPublic/CentrosInfo/indexCoworking.html?id_agente=${agente.id}" class="ver-mais">Ver mais</a>
                                </div>`;
                                $('.cards').append(card);
                            }

                        }
                    })
                    .catch((err) => {
                        alert(`Deu errado: ${err.message}`);
                    });

                $('#titulop').text("Coworkings")
                $('#titleaba').text("Conecta Inovação - Coworkings")

            } else {

                axios.get("http://localhost:8080/ParquesCientificos/carregar")
                    .then((response) => {
                        if(response.status === 200){
                            const cadastros = response.data;

                            for (const agente of cadastros){
                                const card = `
                                <div class="card">
                                <h3>${agente.nome}</h3>
                                <p><strong>Descrição:</strong> ${agente.descricao}</p>
                                <p><strong>Estado:</strong> ${agente.estado}</p>
                                <p><strong>Cidade:</strong> ${agente.cidade}</p>
                                <a href="../CentrosPublic/CentrosInfo/indexParqueCientifico.html?id_agente=${agente.id}" class="ver-mais">Ver mais</a>
                                </div>`;
                                $('.cards').append(card);
                            }

                        }
                    })
                    .catch((err) => {
                        alert(`Deu errado: ${err.message}`);
                    });

                $('#titulop').text("Parques Científicos")
                $('#titleaba').text("Conecta Inovação - Parques Científicos")

            }

        </script>

    </div>
</div>
</body>
</html>
